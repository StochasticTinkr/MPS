package jetbrains.mps.checkers;

/*Generated by MPS */

import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.errors.item.NodeReportItem;
import org.jetbrains.mps.openapi.module.SRepository;
import jetbrains.mps.project.validation.ValidationUtil;
import org.jetbrains.mps.openapi.util.Processor;
import jetbrains.mps.errors.item.IssueKindReportItem;

public class StructureChecker extends AbstractNodeCheckerInEditor implements IChecker<SNode, NodeReportItem> {
  private final boolean mySuppressErrors;
  public StructureChecker(boolean suppressErrors) {
    mySuppressErrors = suppressErrors;
  }
  public StructureChecker() {
    this(true);
  }
  public void checkNodeInEditor(SNode node, final LanguageErrorsCollector errorsCollector, SRepository repository) {
    ValidationUtil.validateSingleNode(node, new Processor<NodeReportItem>() {
      public boolean process(NodeReportItem vp) {
        errorsCollector.addError(vp);
        return true;
      }
    });
  }
  @Override
  public String getCategory() {
    return IssueKindReportItem.STRUCTURE;
  }
  @Override
  public IChecker.AbstractNodeChecker.ErrorSkipCondition skipCondition() {
    if (mySuppressErrors) {
      return AbstractConstraintsCheckerRootCheckerAdapter.SUPPRESS_ERRORS_CONDITION;
    } else {
      return IChecker.AbstractNodeChecker.SKIP_NOTHING_CONDITION;
    }
  }
}
