package jetbrains.mps.smodel.undo;

/*Generated by MPS */

import org.jetbrains.mps.openapi.module.SRepository;
import org.jetbrains.annotations.NotNull;
import org.jetbrains.mps.openapi.model.SNode;
import java.util.List;
import jetbrains.mps.smodel.SNodeUndoableAction;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.internal.collections.runtime.ISelector;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;

public class DefaultUndoContext implements UndoContext {
  private final SRepository myRepository;

  public DefaultUndoContext(@NotNull SRepository repository) {
    myRepository = repository;
  }



  @Override
  public Iterable<SNode> getVirtualFileNodes(List<SNodeUndoableAction> actions) {
    return ListSequence.fromList(actions).select(new ISelector<SNodeUndoableAction, SNode>() {
      public SNode select(SNodeUndoableAction it) {
        return SNodeOperations.getContainingRoot(((SNode) it.getAffectedNode()));
      }
    });
  }

  @Override
  @NotNull
  public SRepository getRepository() {
    return myRepository;
  }
}
