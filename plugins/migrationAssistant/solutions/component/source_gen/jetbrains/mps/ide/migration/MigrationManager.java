package jetbrains.mps.ide.migration;

/*Generated by MPS */

import org.jetbrains.mps.openapi.module.SModule;
import jetbrains.mps.migration.global.ProjectMigration;
import java.util.List;
import java.util.Map;
import jetbrains.mps.migration.global.ProjectMigrationWithOptions;
import org.jetbrains.annotations.Nullable;

public interface MigrationManager {

  boolean isMigrationRequired();

  boolean isMigrationRequired(Iterable<SModule> modules);

  boolean importVersionsUpdateRequired(Iterable<SModule> modules);

  void doUpdateImportVersions(SModule module);

  MigrationComponent getMigrationComponent();

  Iterable<ProjectMigration> getProjectMigrationsToApply();

  List<ScriptApplied.ScriptAppliedReference> getModuleMigrationsToApply(Iterable<SModule> modules);

  List<ScriptApplied.ScriptAppliedReference> getMissingMigrations();

  int projectStepsCount(boolean isCleanup);

  MigrationManager.MigrationStep nextProjectStep(Map<ProjectMigrationWithOptions.Option, Object> options, boolean cleanup);

  int moduleStepsCount();

  MigrationManager.MigrationStep nextModuleStep(@Nullable String preferredId);

  interface MigrationStep {
    String getDescription();
    String getCommonDescription();
    String getMergeId();
    boolean execute();
    void forceExecutionNextTime();
  }
}
