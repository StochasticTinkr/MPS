package jetbrains.mps.lang.test.runtime;

/*Generated by MPS */

import javax.swing.JComponent;
import jetbrains.mps.openapi.editor.cells.EditorCell;
import jetbrains.mps.nodeEditor.EditorComponent;
import jetbrains.mps.nodeEditor.EditorCell_WithComponent;
import jetbrains.mps.nodeEditor.EditorSettings;

public class EditorUtil {
  public static JComponent getEventTargetComponent(EditorCell currentCell, EditorComponent editorComponent) {
    while (currentCell != null) {
      if (currentCell instanceof EditorCell_WithComponent) {
        return ((EditorCell_WithComponent) currentCell).getComponent();
      }
      currentCell = currentCell.getParent();
    }
    return editorComponent;
  }
  public static void runWithTwoStepDeletion(EditorUtil.EditorTestRunnable runnable, boolean twoStepDeletion) throws Exception {
    boolean twoStepDeletionSettings = EditorSettings.getInstance().isUseTwoStepDeletion();
    EditorSettings.getInstance().setUseTwoStepDeletion(twoStepDeletion);
    try {
      runnable.run();
    } finally {
      EditorSettings.getInstance().setUseTwoStepDeletion(twoStepDeletionSettings);
    }
  }

  public interface EditorTestRunnable {
    void run() throws Exception;
  }

}
