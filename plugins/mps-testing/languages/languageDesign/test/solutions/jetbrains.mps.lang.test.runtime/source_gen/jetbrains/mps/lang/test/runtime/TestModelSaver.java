package jetbrains.mps.lang.test.runtime;

/*Generated by MPS */

import jetbrains.mps.smodel.ModelAccess;

/**
 * 
 * 
 * @deprecated the solution is to pass the model ref inside the config and whenever the model changes renew environment
 */
@Deprecated
/*package*/ final class TestModelSaver {
  private volatile TransformationTest myTest = null;

  @Deprecated
  /*package*/ TestModelSaver() {
  }

  public TransformationTest getTest() {
    return myTest;
  }

  public void setTest(TransformationTest test) {
    assert myTest == null;
    myTest = test;
  }

  public void clean() {
    if (myTest == null) {
      return;
    }
    myTest.getProject().getModelAccess().runWriteInEDT(new Runnable() {
      public void run() {
        myTest.dispose();
        myTest = null;
      }
    });
    ModelAccess.instance().flushEventQueue();
  }
}
