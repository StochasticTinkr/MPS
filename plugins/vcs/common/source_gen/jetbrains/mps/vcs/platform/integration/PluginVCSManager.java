package jetbrains.mps.vcs.platform.integration;

/*Generated by MPS */

import com.intellij.openapi.components.ApplicationComponent;
import jetbrains.mps.ide.MPSCoreComponents;
import jetbrains.mps.extapi.module.SRepositoryRegistry;
import org.jetbrains.annotations.NonNls;
import org.jetbrains.annotations.NotNull;

public class PluginVCSManager implements ApplicationComponent {
  private final ModelStorageProblemsListener myResolver;
  private final MPSCoreComponents myMPSComponents;

  public PluginVCSManager(MPSCoreComponents coreComponents) {
    myResolver = new ModelStorageProblemsListener();
    myMPSComponents = coreComponents;
  }

  @Override
  public void initComponent() {
    SRepositoryRegistry repoRegistry = myMPSComponents.getPlatform().findComponent(SRepositoryRegistry.class);
    repoRegistry.addGlobalListener(myResolver);
  }

  @Override
  public void disposeComponent() {
    SRepositoryRegistry repoRegistry = myMPSComponents.getPlatform().findComponent(SRepositoryRegistry.class);
    repoRegistry.removeGlobalListener(myResolver);
  }

  @NonNls
  @NotNull
  @Override
  public String getComponentName() {
    return "VCS manager";
  }
}
