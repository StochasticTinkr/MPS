<project name="mpsPluginDist" default="build" basedir="../">
  <!-- Generated by MPS -->
  <property name="build.dir" location="build" />
  <property name="build.tmp" location="${build.dir}/tmp/mpsPluginDist" />
  <property name="build.layout" location="${build.dir}/artifacts/mpsPluginDist" />
  <property name="artifacts.mpsPlugin" location="${build.dir}/artifacts/mpsPlugin" />
  <property file="${artifacts.mpsPlugin}/build.properties" prefix="import.mpsPlugin" />
  <property name="mpsPlugin.plugin.version" value="${import.mpsPlugin.mpsPlugin.plugin.version}" />
  <property name="mpsPlugin.date" value="${import.mpsPlugin.mpsPlugin.date}" />
  <property name="mpsBootstrapCore.version" value="${import.mpsPlugin.mpsBootstrapCore.version}" />
  <property name="mpsPluginCommon.plugin.version" value="${import.mpsPlugin.mpsPluginCommon.plugin.version}" />
  <property name="mpsPluginCommon.date" value="${import.mpsPlugin.mpsPluginCommon.date}" />
  <property name="mpsPluginCore.plugin.version" value="${import.mpsPlugin.mpsPluginCore.plugin.version}" />
  <property name="mpsPluginCore.date" value="${import.mpsPlugin.mpsPluginCore.date}" />
  <property name="mpsIdeaVcs.plugin.version" value="${import.mpsPlugin.mpsIdeaVcs.plugin.version}" />
  <property name="mpsIdeaVcs.date" value="${import.mpsPlugin.mpsIdeaVcs.date}" />
  
  <target name="assemble" depends="fetchDependencies">
    <mkdir dir="${build.layout}" />
    <zip destfile="${build.layout}/${mpsPlugin.plugin.version}-plugin.zip">
      <fileset dir="${artifacts.mpsPlugin}" />
    </zip>
    <echo file="${build.layout}/build.properties">mpsPlugin.plugin.version=${mpsPlugin.plugin.version}${line.separator}mpsPlugin.date=${mpsPlugin.date}${line.separator}mpsBootstrapCore.version=${mpsBootstrapCore.version}${line.separator}mpsPluginCommon.plugin.version=${mpsPluginCommon.plugin.version}${line.separator}mpsPluginCommon.date=${mpsPluginCommon.date}${line.separator}mpsPluginCore.plugin.version=${mpsPluginCore.plugin.version}${line.separator}mpsPluginCore.date=${mpsPluginCore.date}${line.separator}mpsIdeaVcs.plugin.version=${mpsIdeaVcs.plugin.version}${line.separator}mpsIdeaVcs.date=${mpsIdeaVcs.date}</echo>
  </target>
  
  <target name="buildDependents">
    <ant antfile="build/mpsBootstrapCore.xml" inheritAll="false" useNativeBasedir="true" />
    <ant antfile="build/mpsCore.xml" inheritAll="false" useNativeBasedir="true" />
    <ant antfile="build/mpsTesting.xml" inheritAll="false" useNativeBasedir="true" />
    <ant antfile="build/mpsJavaPlatform.xml" inheritAll="false" useNativeBasedir="true" />
    <ant antfile="IdeaPlugin/mpsPluginCommon.xml" inheritAll="false" useNativeBasedir="true" />
    <ant antfile="IdeaPlugin/mpsJpsIdea.xml" inheritAll="false" useNativeBasedir="true" />
    <ant antfile="IdeaPlugin/mpsPluginCore.xml" inheritAll="false" useNativeBasedir="true" />
    <ant antfile="IdeaPlugin/mpsJavaIdeaPlugin.xml" inheritAll="false" useNativeBasedir="true" />
    <ant antfile="build/mpsBuild.xml" inheritAll="false" useNativeBasedir="true" />
    <ant antfile="build/mpsVcsCore.xml" inheritAll="false" useNativeBasedir="true" />
    <ant antfile="IdeaPlugin/mpsIdeaVcs.xml" inheritAll="false" useNativeBasedir="true" />
    <ant antfile="build/tests/mpsEditorCommon.xml" inheritAll="false" useNativeBasedir="true" />
    <ant antfile="IdeaPlugin/mpsEditorTestsPlugin.xml" inheritAll="false" useNativeBasedir="true" />
    <ant antfile="IdeaPlugin/mpsPluginTests.xml" inheritAll="false" useNativeBasedir="true" />
    <ant antfile="IdeaPlugin/mpsPlugin.xml" inheritAll="false" useNativeBasedir="true" />
  </target>
  
  <target name="fetchDependencies" />
  
  <target name="build" depends="assemble" />
  
  <target name="clean">
    <delete dir="${build.tmp}" />
    <delete dir="${build.layout}" />
  </target>
</project>